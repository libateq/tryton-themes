/*
 * This file is part of the tryton themes.
 * Please see the COPYRIGHT and README.rst files at the top level of this
 * repository for full copyright notices, license terms and support
 * information.
 */

@brand-primary-escaped: escape(@brand-primary);

label {
  font-weight: normal;
}

input.form-control,
input[type=text],
input[type=password],
input[type=email],
input[type=number],
[type=text].form-control,
[type=password].form-control,
[type=email].form-control,
[type=tel].form-control,
[contenteditable].form-control {
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;
  border-top-width: 0;
  border-left-width: 0;
  border-right-width: 0;
  border-bottom: 1px solid @input-border;
  border-radius: 0;
  box-shadow: none;
  padding-left: @padding-xs-horizontal;
  padding-right: @padding-xs-horizontal;

  &:focus {
    border-bottom-color: @input-border-focus;
    box-shadow: 0 4px 4px -4px @input-border-focus;
  }

  &[disabled],
  &[readonly],
  fieldset[disabled] & {
    border-bottom-style: dashed;

    &:focus {
      border-color: @input-border;
      border-bottom-style: solid;
      box-shadow: 0 4px 4px -4px @input-border;
    }
  }

  .form-group-sm & {
    border-radius: 0;
  }
}

select,
select.form-control {
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;
  border-top: none;
  border-left: none;
  border-right: none;
  border-bottom: 1px solid @input-border;
  border-radius: 0;
  box-shadow: none;
  cursor: pointer;
  padding: 0 @padding-xs-horizontal;

  &:focus {
    border-color: @input-border-focus;
    box-shadow: 0 4px 4px -4px @input-border-focus;
  }

  &[disabled],
  &[readonly],
  fieldset[disabled] & {
    border-bottom-style: dashed;

    &:focus {
      border-color: @input-border;
      border-bottom-style: solid;
      box-shadow: 0 4px 4px -4px @input-border;
    }
  }

  &:not([multiple]) {
    background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" viewBox="0 0 24 24"><path fill="@{brand-primary-escaped}" d="M7.41,8.59L12,13.17l4.59-4.58L18,10l-6,6l-6-6L7.41,8.59z"/><path fill="none" d="M0,0h24v24H0V0z"/></svg>');
    background-position: right center;
    background-repeat: no-repeat;
    background-size: (@padding-xs-horizontal + 20px) 20px; // TODO @input-icon-small;
    padding-right: @padding-xs-horizontal + 20px; // TODO: @input-icon-small;

    &[disabled],
    &[readonly] {
      background-image: none;
    }
  }
}

textarea,
textarea.form-control {
  border-top: none;
  border-left: none;
  border-right: none;
  border-bottom: 1px solid @input-border;
  border-radius: 0 !important;
  box-shadow: none;
  line-height: @input-height-small;
  padding: 0 @padding-xs-horizontal;

  // TODO: Fix local attachment in firefox
  background-attachment: local;
  background-image: repeating-linear-gradient(
    @input-bg,
    @input-bg @input-height-small - 1px,
    @input-border @input-height-small - 1px,
    @input-border @input-height-small,
    @input-bg @input-height-small );

  &:focus {
    box-shadow: 0 4px 4px -4px @input-border-focus;

    background-image: repeating-linear-gradient(
      @input-bg,
      @input-bg @input-height-small - 1px,
      @input-border-focus @input-height-small - 1px,
      @input-border-focus @input-height-small,
      @input-bg @input-height-small );
  }

  &[disabled],
  &[readonly],
  fieldset[disabled] & {
    border-bottom-style: dashed;

    background-image:
      repeating-linear-gradient(
        to right,
        @input-bg-disabled,
        @input-bg-disabled 3px,
        transparent 3px,
        transparent 6px,
        @input-bg-disabled 6px),
      repeating-linear-gradient(
        @input-bg-disabled,
        @input-bg-disabled @input-height-small - 1px,
        @input-border @input-height-small - 1px,
        @input-border @input-height-small,
        @input-bg-disabled @input-height-small );

    &:focus {
      border-color: @input-border;
      border-bottom-style: solid;
      box-shadow: 0 4px 4px -4px @input-border;
      background-image: repeating-linear-gradient(
        @input-bg,
        @input-bg @input-height-small - 1px,
        @input-border @input-height-small - 1px,
        @input-border @input-height-small,
        @input-bg @input-height-small );
    }
  }
}

input[type="radio"],
.radio input[type="radio"],
.radio-inline input[type="radio"] {
  margin: 0;
}

.has-warning {
  .form-control,
  input.form-control[readonly],
  input[type=text][readonly],
  [type=text].form-control[readonly] {
    box-shadow: none;
    border-color: @brand-warning;

    &:not([type=checkbox]):active,
    &:not([type=checkbox]):focus {
      box-shadow: 0 4px 4px -4px @brand-warning;
    }

    &[type=checkbox]:active,
    &[type=checkbox]:focus {
      border-color: @brand-warning;
    }
  }
}

.has-error {
  .form-control,
  input.form-control[readonly],
  input[type=text][readonly],
  [type=text].form-control[readonly] {
    box-shadow: none;
    border-color: @brand-warning;

    &:not([type=checkbox]):active,
    &:not([type=checkbox]):focus {
      box-shadow: 0 4px 4px -4px @brand-danger;
    }

    &[type=checkbox]:active,
    &[type=checkbox]:focus {
      border-color: @brand-danger;
    }
  }
}

.has-success {
  .form-control,
  input.form-control[readonly],
  input[type=text][readonly],
  [type=text].form-control[readonly] {
    box-shadow: none;
    border-color: @brand-warning;

    &:not([type=checkbox]):active,
    &:not([type=checkbox]):focus {
      box-shadow: 0 4px 4px -4px @brand-success;
    }

    &[type=checkbox]:active,
    &[type=checkbox]:focus {
      border-color: @brand-success;
    }
  }
}
